const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mapbox-gl-CQDWLjxZ.js","assets/index-BKnUptbb.js","assets/index-CgS_G8QF.css"])))=>i.map(i=>d[i]);
import{c as de,r as c,a as te,_ as ht,R as Ye,u as ft,b as pt,t as gt,C as N,d as z,S as Fe,l as bt,g as yt,j as e,P as $e,X,L as vt,e as jt,H as Nt,f as le,T as De,h as wt,A as ee,i as kt,k as St,m as Ct,n as _t,M as Mt,o as Et,p as Lt}from"./index-BKnUptbb.js";import{S as Rt}from"./sliders-BgyPZosl.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=de("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=de("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=de("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),At=c.createContext(null);function Pt(s,t){const a=Array.isArray(s)?s[0]:s?s.x:0,o=Array.isArray(s)?s[1]:s?s.y:0,i=Array.isArray(t)?t[0]:t?t.x:0,l=Array.isArray(t)?t[1]:t?t.y:0;return a===i&&o===l}function M(s,t){if(s===t)return!0;if(!s||!t)return!1;if(Array.isArray(s)){if(!Array.isArray(t)||s.length!==t.length)return!1;for(let a=0;a<s.length;a++)if(!M(s[a],t[a]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof s=="object"&&typeof t=="object"){const a=Object.keys(s),o=Object.keys(t);if(a.length!==o.length)return!1;for(const i of a)if(!t.hasOwnProperty(i)||!M(s[i],t[i]))return!1;return!0}return!1}function Ot(s){const t=s.clone();return t.pixelsToGLUnits=s.pixelsToGLUnits,t}function qe(s,t){if(!s.getProjection)return;const a=s.getProjection(),o=t.getProjection();M(a,o)||t.setProjection(a)}function Ue(s){return{longitude:s.center.lng,latitude:s.center.lat,zoom:s.zoom,pitch:s.pitch,bearing:s.bearing,padding:s.padding}}function He(s,t){const a=t.viewState||t;let o=!1;if("zoom"in a){const i=s.zoom;s.zoom=a.zoom,o=o||i!==s.zoom}if("bearing"in a){const i=s.bearing;s.bearing=a.bearing,o=o||i!==s.bearing}if("pitch"in a){const i=s.pitch;s.pitch=a.pitch,o=o||i!==s.pitch}if(a.padding&&!s.isPaddingEqual(a.padding)&&(o=!0,s.padding=a.padding),"longitude"in a&&"latitude"in a){const i=s.center;s.center=new i.constructor(a.longitude,a.latitude),o=o||i!==s.center}return o}const Ft=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Be(s){if(!s)return null;if(typeof s=="string"||("toJS"in s&&(s=s.toJS()),!s.layers))return s;const t={};for(const o of s.layers)t[o.id]=o;const a=s.layers.map(o=>{let i=null;"interactive"in o&&(i=Object.assign({},o),delete i.interactive);const l=t[o.ref];if(l){i=i||Object.assign({},o),delete i.ref;for(const r of Ft)r in l&&(i[r]=l[r])}return i||o});return{...s,layers:a}}var Ve={};const Ze={version:8,sources:{},layers:[]},We={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},re={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Ge={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},$t=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Dt=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class U{constructor(t,a,o){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const l=this.props[Ge[i.type]];l?l(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const l=this.props[We[i.type]];l&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),l(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const l=this.props[re[i.type]];l&&l(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=t,this.props=a,this._initialize(o)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const a=this.props;this.props=t;const o=this._updateSettings(t,a);o&&this._createShadowTransform(this._map);const i=this._updateSize(t),l=this._updateViewState(t,!0);this._updateStyle(t,a),this._updateStyleComponents(t,a),this._updateHandlers(t,a),(o||i||l&&!this._map.isMoving())&&this.redraw()}static reuse(t,a){const o=U.savedMaps.pop();if(!o)return null;const i=o.map,l=i.getContainer();for(a.className=l.className;l.childNodes.length>0;)a.appendChild(l.childNodes[0]);i._container=a;const r=i._resizeObserver;r&&(r.disconnect(),r.observe(a)),o.setProps({...t,styleDiffing:!1}),i.resize();const{initialViewState:m}=t;return m&&(m.bounds?i.fitBounds(m.bounds,{...m.fitBoundsOptions,duration:0}):o._updateViewState(m,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),o}_initialize(t){const{props:a}=this,{mapStyle:o=Ze}=a,i={...a,...a.initialViewState,accessToken:a.mapboxAccessToken||It()||null,container:t,style:Be(o)},l=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[l.longitude||0,l.latitude||0],zoom:l.zoom||0,pitch:l.pitch||0,bearing:l.bearing||0}),a.gl){const f=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=f,a.gl)}const r=new this._MapClass(i);l.padding&&r.setPadding(l.padding),a.cursor&&(r.getCanvas().style.cursor=a.cursor),this._createShadowTransform(r);const m=r._render;r._render=f=>{this._inRender=!0,m.call(r,f),this._inRender=!1};const h=r._renderTaskQueue.run;r._renderTaskQueue.run=f=>{h.call(r._renderTaskQueue,f),this._onBeforeRepaint()},r.on("render",()=>this._onAfterRepaint());const x=r.fire;r.fire=this._fireEvent.bind(this,x),r.on("resize",()=>{this._renderTransform.resize(r.transform.width,r.transform.height)}),r.on("styledata",()=>{this._updateStyleComponents(this.props,{}),qe(r.transform,this._renderTransform)}),r.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const f in We)r.on(f,this._onPointerEvent);for(const f in re)r.on(f,this._onCameraEvent);for(const f in Ge)r.on(f,this._onEvent);this._map=r}recycle(){const a=this.map.getContainer().querySelector("[mapboxgl-children]");a==null||a.remove(),U.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const a=Ot(t.transform);t.painter.transform=a,this._renderTransform=a}_updateSize(t){const{viewState:a}=t;if(a){const o=this._map;if(a.width!==o.transform.width||a.height!==o.transform.height)return o.resize(),!0}return!1}_updateViewState(t,a){if(this._internalUpdate)return!1;const o=this._map,i=this._renderTransform,{zoom:l,pitch:r,bearing:m}=i,h=o.isMoving();h&&(i.cameraElevationReference="sea");const x=He(i,{...Ue(o.transform),...t});if(h&&(i.cameraElevationReference="ground"),x&&a){const f=this._deferredEvents;f.move=!0,f.zoom||(f.zoom=l!==i.zoom),f.rotate||(f.rotate=m!==i.bearing),f.pitch||(f.pitch=r!==i.pitch)}return h||He(o.transform,t),x}_updateSettings(t,a){const o=this._map;let i=!1;for(const l of $t)if(l in t&&!M(t[l],a[l])){i=!0;const r=o[`set${l[0].toUpperCase()}${l.slice(1)}`];r==null||r.call(o,t[l])}return i}_updateStyle(t,a){if(t.cursor!==a.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==a.mapStyle){const{mapStyle:o=Ze,styleDiffing:i=!0}=t,l={diff:i};return"localIdeographFontFamily"in t&&(l.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(Be(o),l),!0}return!1}_updateStyleComponents(t,a){const o=this._map;let i=!1;return o.isStyleLoaded()&&("light"in t&&o.setLight&&!M(t.light,a.light)&&(i=!0,o.setLight(t.light)),"fog"in t&&o.setFog&&!M(t.fog,a.fog)&&(i=!0,o.setFog(t.fog)),"terrain"in t&&o.setTerrain&&!M(t.terrain,a.terrain)&&(!t.terrain||o.getSource(t.terrain.source))&&(i=!0,o.setTerrain(t.terrain))),i}_updateHandlers(t,a){var o,i;const l=this._map;let r=!1;for(const m of Dt){const h=(o=t[m])!==null&&o!==void 0?o:!0,x=(i=a[m])!==null&&i!==void 0?i:!0;M(h,x)||(r=!0,h?l[m].enable(h):l[m].disable())}return r}_queryRenderedFeatures(t){const a=this._map,o=a.transform,{interactiveLayerIds:i=[]}=this.props;try{return a.transform=this._renderTransform,a.queryRenderedFeatures(t,{layers:i.filter(a.getLayer.bind(a))})}catch{return[]}finally{a.transform=o}}_updateHover(t){var a;const{props:o}=this;if(o.interactiveLayerIds&&(o.onMouseMove||o.onMouseEnter||o.onMouseLeave)){const l=t.type,r=((a=this._hoveredFeatures)===null||a===void 0?void 0:a.length)>0,m=this._queryRenderedFeatures(t.point),h=m.length>0;!h&&r&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=m,h&&!r&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=l}else this._hoveredFeatures=null}_fireEvent(t,a,o){const i=this._map,l=i.transform,r=typeof a=="string"?a:a.type;return r==="move"&&this._updateViewState(this.props,!1),r in re&&(typeof a=="object"&&(a.viewState=Ue(l)),this._map.isMoving())?(i.transform=this._renderTransform,t.call(i,a,o),i.transform=l,i):(t.call(i,a,o),i)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const o in this._deferredEvents)this._deferredEvents[o]&&t.fire(o);this._internalUpdate=!1;const a=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{qe(this._renderTransform,a),t.transform=a}}}U.savedMaps=[];function It(){let s=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);s=t&&t[1]}try{s=s||Ve.MapboxAccessToken}catch{}try{s=s||Ve.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return s}const qt=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Ut(s){if(!s)return null;const t=s.map,a={getMap:()=>t,getCenter:()=>s.transform.center,getZoom:()=>s.transform.zoom,getBearing:()=>s.transform.bearing,getPitch:()=>s.transform.pitch,getPadding:()=>s.transform.padding,getBounds:()=>s.transform.getBounds(),project:o=>{const i=t.transform;t.transform=s.transform;const l=t.project(o);return t.transform=i,l},unproject:o=>{const i=t.transform;t.transform=s.transform;const l=t.unproject(o);return t.transform=i,l},queryTerrainElevation:(o,i)=>{const l=t.transform;t.transform=s.transform;const r=t.queryTerrainElevation(o,i);return t.transform=l,r},queryRenderedFeatures:(o,i)=>{const l=t.transform;t.transform=s.transform;const r=t.queryRenderedFeatures(o,i);return t.transform=l,r}};for(const o of Ht(t))!(o in a)&&!qt.includes(o)&&(a[o]=t[o].bind(t));return a}function Ht(s){const t=new Set;let a=s;for(;a;){for(const o of Object.getOwnPropertyNames(a))o[0]!=="_"&&typeof s[o]=="function"&&o!=="fire"&&o!=="setEventedParent"&&t.add(o);a=Object.getPrototypeOf(a)}return Array.from(t)}const Bt=typeof document<"u"?c.useLayoutEffect:c.useEffect,Vt=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Zt(s,t){for(const o of Vt)o in t&&(s[o]=t[o]);const{RTLTextPlugin:a="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;a&&s.getRTLTextPluginStatus&&s.getRTLTextPluginStatus()==="unavailable"&&s.setRTLTextPlugin(a,o=>{o&&console.error(o)},!0)}const H=c.createContext(null);function Wt(s,t,a){const o=c.useContext(At),[i,l]=c.useState(null),r=c.useRef(),{current:m}=c.useRef({mapLib:null,map:null});c.useEffect(()=>{const f=s.mapLib;let p=!0,S;return Promise.resolve(f||a).then(C=>{if(!p)return;if(!C)throw new Error("Invalid mapLib");const w="Map"in C?C:C.default;if(!w.Map)throw new Error("Invalid mapLib");if(Zt(w,s),!w.supported||w.supported(s))s.reuseMaps&&(S=U.reuse(s,r.current)),S||(S=new U(w.Map,s,r.current)),m.map=Ut(S),m.mapLib=w,l(S),o==null||o.onMapMount(m.map,s.id);else throw new Error("Map is not supported by this browser")}).catch(C=>{const{onError:w}=s;w?w({type:"error",target:null,originalEvent:null,error:C}):console.error(C)}),()=>{p=!1,S&&(o==null||o.onMapUnmount(s.id),s.reuseMaps?S.recycle():S.destroy())}},[]),Bt(()=>{i&&i.setProps(s)}),c.useImperativeHandle(t,()=>m.map,[i]);const h=c.useMemo(()=>({position:"relative",width:"100%",height:"100%",...s.style}),[s.style]),x={height:"100%"};return c.createElement("div",{id:s.id,ref:r,style:h},i&&c.createElement(H.Provider,{value:m},c.createElement("div",{"mapboxgl-children":"",style:x},s.children)))}const Gt=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function $(s,t){if(!s||!t)return;const a=s.style;for(const o in t){const i=t[o];Number.isFinite(i)&&!Gt.test(o)?a[o]=`${i}px`:a[o]=i}}function Jt(s,t){const{map:a,mapLib:o}=c.useContext(H),i=c.useRef({props:s});i.current.props=s;const l=c.useMemo(()=>{let O=!1;c.Children.forEach(s.children,L=>{L&&(O=!0)});const W={...s,element:O?document.createElement("div"):null},A=new o.Marker(W);return A.setLngLat([s.longitude,s.latitude]),A.getElement().addEventListener("click",L=>{var _,k;(k=(_=i.current.props).onClick)===null||k===void 0||k.call(_,{type:"click",target:A,originalEvent:L})}),A.on("dragstart",L=>{var _,k;const R=L;R.lngLat=l.getLngLat(),(k=(_=i.current.props).onDragStart)===null||k===void 0||k.call(_,R)}),A.on("drag",L=>{var _,k;const R=L;R.lngLat=l.getLngLat(),(k=(_=i.current.props).onDrag)===null||k===void 0||k.call(_,R)}),A.on("dragend",L=>{var _,k;const R=L;R.lngLat=l.getLngLat(),(k=(_=i.current.props).onDragEnd)===null||k===void 0||k.call(_,R)}),A},[]);c.useEffect(()=>(l.addTo(a.getMap()),()=>{l.remove()}),[]);const{longitude:r,latitude:m,offset:h,style:x,draggable:f=!1,popup:p=null,rotation:S=0,rotationAlignment:C="auto",pitchAlignment:w="auto"}=s;return c.useEffect(()=>{$(l.getElement(),x)},[x]),c.useImperativeHandle(t,()=>l,[]),(l.getLngLat().lng!==r||l.getLngLat().lat!==m)&&l.setLngLat([r,m]),h&&!Pt(l.getOffset(),h)&&l.setOffset(h),l.isDraggable()!==f&&l.setDraggable(f),l.getRotation()!==S&&l.setRotation(S),l.getRotationAlignment()!==C&&l.setRotationAlignment(C),l.getPitchAlignment()!==w&&l.setPitchAlignment(w),l.getPopup()!==p&&l.setPopup(p),te.createPortal(s.children,l.getElement())}const Qt=c.memo(c.forwardRef(Jt));function Je(s){return new Set(s?s.trim().split(/\s+/):[])}function Yt(s,t){const{map:a,mapLib:o}=c.useContext(H),i=c.useMemo(()=>document.createElement("div"),[]),l=c.useRef({props:s});l.current.props=s;const r=c.useMemo(()=>{const m={...s},h=new o.Popup(m);return h.setLngLat([s.longitude,s.latitude]),h.once("open",x=>{var f,p;(p=(f=l.current.props).onOpen)===null||p===void 0||p.call(f,x)}),h},[]);if(c.useEffect(()=>{const m=h=>{var x,f;(f=(x=l.current.props).onClose)===null||f===void 0||f.call(x,h)};return r.on("close",m),r.setDOMContent(i).addTo(a.getMap()),()=>{r.off("close",m),r.isOpen()&&r.remove()}},[]),c.useEffect(()=>{$(r.getElement(),s.style)},[s.style]),c.useImperativeHandle(t,()=>r,[]),r.isOpen()&&((r.getLngLat().lng!==s.longitude||r.getLngLat().lat!==s.latitude)&&r.setLngLat([s.longitude,s.latitude]),s.offset&&!M(r.options.offset,s.offset)&&r.setOffset(s.offset),(r.options.anchor!==s.anchor||r.options.maxWidth!==s.maxWidth)&&(r.options.anchor=s.anchor,r.setMaxWidth(s.maxWidth)),r.options.className!==s.className)){const m=Je(r.options.className),h=Je(s.className);for(const x of m)h.has(x)||r.removeClassName(x);for(const x of h)m.has(x)||r.addClassName(x);r.options.className=s.className}return te.createPortal(s.children,i)}c.memo(c.forwardRef(Yt));function Z(s,t,a,o){const i=c.useContext(H),l=c.useMemo(()=>s(i),[]);return c.useEffect(()=>{const r=t,m=typeof t=="function"?t:null,{map:h}=i;return h.hasControl(l)||h.addControl(l,r==null?void 0:r.position),()=>{m&&m(i),h.hasControl(l)&&h.removeControl(l)}},[]),l}function Kt(s){const t=Z(({mapLib:a})=>new a.AttributionControl(s),{position:s.position});return c.useEffect(()=>{$(t._container,s.style)},[s.style]),null}c.memo(Kt);function Xt(s){const t=Z(({mapLib:a})=>new a.FullscreenControl({container:s.containerId&&document.getElementById(s.containerId)}),{position:s.position});return c.useEffect(()=>{$(t._controlContainer,s.style)},[s.style]),null}const es=c.memo(Xt);function ts(s,t){const a=c.useRef({props:s}),o=Z(({mapLib:i})=>{const l=new i.GeolocateControl(s),r=l._setupUI;return l._setupUI=m=>{l._container.hasChildNodes()||r(m)},l.on("geolocate",m=>{var h,x;(x=(h=a.current.props).onGeolocate)===null||x===void 0||x.call(h,m)}),l.on("error",m=>{var h,x;(x=(h=a.current.props).onError)===null||x===void 0||x.call(h,m)}),l.on("outofmaxbounds",m=>{var h,x;(x=(h=a.current.props).onOutOfMaxBounds)===null||x===void 0||x.call(h,m)}),l.on("trackuserlocationstart",m=>{var h,x;(x=(h=a.current.props).onTrackUserLocationStart)===null||x===void 0||x.call(h,m)}),l.on("trackuserlocationend",m=>{var h,x;(x=(h=a.current.props).onTrackUserLocationEnd)===null||x===void 0||x.call(h,m)}),l},{position:s.position});return a.current.props=s,c.useImperativeHandle(t,()=>o,[]),c.useEffect(()=>{$(o._container,s.style)},[s.style]),null}c.memo(c.forwardRef(ts));function ss(s){const t=Z(({mapLib:a})=>new a.NavigationControl(s),{position:s.position});return c.useEffect(()=>{$(t._container,s.style)},[s.style]),null}const ns=c.memo(ss);function as(s){const t=Z(({mapLib:l})=>new l.ScaleControl(s),{position:s.position}),a=c.useRef(s),o=a.current;a.current=s;const{style:i}=s;return s.maxWidth!==void 0&&s.maxWidth!==o.maxWidth&&(t.options.maxWidth=s.maxWidth),s.unit!==void 0&&s.unit!==o.unit&&t.setUnit(s.unit),c.useEffect(()=>{$(t._container,i)},[i]),null}c.memo(as);function se(s,t){if(!s)throw new Error(t)}function os(s,t,a,o){if(se(a.id===o.id,"layer id changed"),se(a.type===o.type,"layer type changed"),a.type==="custom"||o.type==="custom")return;const{layout:i={},paint:l={},filter:r,minzoom:m,maxzoom:h,beforeId:x}=a;if(x!==o.beforeId&&s.moveLayer(t,x),i!==o.layout){const f=o.layout||{};for(const p in i)M(i[p],f[p])||s.setLayoutProperty(t,p,i[p]);for(const p in f)i.hasOwnProperty(p)||s.setLayoutProperty(t,p,void 0)}if(l!==o.paint){const f=o.paint||{};for(const p in l)M(l[p],f[p])||s.setPaintProperty(t,p,l[p]);for(const p in f)l.hasOwnProperty(p)||s.setPaintProperty(t,p,void 0)}M(r,o.filter)||s.setFilter(t,r),(m!==o.minzoom||h!==o.maxzoom)&&s.setLayerZoomRange(t,m,h)}function is(s,t,a){if(s.style&&s.style._loaded&&(!("source"in a)||s.getSource(a.source))){const o={...a,id:t};delete o.beforeId,s.addLayer(o,a.beforeId)}}let ls=0;function rs(s){const t=c.useContext(H).map.getMap(),a=c.useRef(s),[,o]=c.useState(0),i=c.useMemo(()=>s.id||`jsx-layer-${ls++}`,[]);if(c.useEffect(()=>{if(t){const r=()=>o(m=>m+1);return t.on("styledata",r),r(),()=>{t.off("styledata",r),t.style&&t.style._loaded&&t.getLayer(i)&&t.removeLayer(i)}}},[t]),t&&t.style&&t.getLayer(i))try{os(t,i,s,a.current)}catch(r){console.warn(r)}else is(t,i,s);return a.current=s,null}let cs=0;function ds(s,t,a){if(s.style&&s.style._loaded){const o={...a};return delete o.id,delete o.children,s.addSource(t,o),s.getSource(t)}return null}function us(s,t,a){se(t.id===a.id,"source id changed"),se(t.type===a.type,"source type changed");let o="",i=0;for(const r in t)r!=="children"&&r!=="id"&&!M(a[r],t[r])&&(o=r,i++);if(!i)return;const l=t.type;l==="geojson"?s.setData(t.data):l==="image"?s.updateImage({url:t.url,coordinates:t.coordinates}):"setCoordinates"in s&&i===1&&o==="coordinates"?s.setCoordinates(t.coordinates):"setUrl"in s&&o==="url"?s.setUrl(t.url):"setTiles"in s&&o==="tiles"?s.setTiles(t.tiles):console.warn(`Unable to update <Source> prop: ${o}`)}function ms(s){const t=c.useContext(H).map.getMap(),a=c.useRef(s),[,o]=c.useState(0),i=c.useMemo(()=>s.id||`jsx-source-${cs++}`,[]);c.useEffect(()=>{if(t){const r=()=>setTimeout(()=>o(m=>m+1),0);return t.on("styledata",r),r(),()=>{var m;if(t.off("styledata",r),t.style&&t.style._loaded&&t.getSource(i)){const h=(m=t.getStyle())===null||m===void 0?void 0:m.layers;if(h)for(const x of h)x.source===i&&t.removeLayer(x.id);t.removeSource(i)}}}},[t]);let l=t&&t.style&&t.getSource(i);return l?us(l,s,a.current):l=ds(t,i,s),a.current=s,l&&c.Children.map(s.children,r=>r&&c.cloneElement(r,{source:i}))||null}const xs=ht(()=>import("./mapbox-gl-CQDWLjxZ.js").then(s=>s.m),__vite__mapDeps([0,1,2])),hs=c.forwardRef(function(t,a){return Wt(t,a,xs)}),fs=Qt,ps=es,gs=ns,P=rs,ce=ms,bs={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_MAPBOX_TOKEN:"pk.eyJ1IjoiZmluZGxpbmc2NyIsImEiOiJjbWl2d3l4eGYyZm52M2Vwd2FnMjBtN2pzIn0.HtCoEjQlnI6YvBQKa9AZnQ"},Qe=[{id:"dark",name:"Dark",url:"mapbox://styles/mapbox/dark-v11"},{id:"light",name:"Light",url:"mapbox://styles/mapbox/light-v11"},{id:"satellite",name:"Satellite",url:"mapbox://styles/mapbox/satellite-streets-v12"},{id:"navigation",name:"Navigation",url:"mapbox://styles/mapbox/navigation-night-v1"}],ys=({isHovered:s,isUnlocked:t,isPartial:a,onClick:o,onMouseEnter:i,onMouseLeave:l})=>{const r=t?"#06b6d4":a?"#eab308":"#64748b";return e.jsxs("div",{className:"relative cursor-pointer",onClick:o,onMouseEnter:i,onMouseLeave:l,children:[t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 animate-ping",style:{animationDelay:"0s",animationDuration:"2s"},children:e.jsx("div",{className:"w-10 h-10 rounded-full opacity-40",style:{backgroundColor:r,margin:"-8px"}})}),e.jsx("div",{className:"absolute inset-0 animate-ping",style:{animationDelay:"0.5s",animationDuration:"2s"},children:e.jsx("div",{className:"w-8 h-8 rounded-full opacity-50",style:{backgroundColor:r,margin:"-5px"}})})]}),a&&!t&&e.jsx("div",{className:"absolute inset-0 animate-pulse",style:{animationDuration:"3s"},children:e.jsx("div",{className:"w-9 h-9 rounded-full border-2 border-yellow-500 opacity-50",style:{margin:"-6px"}})}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 border-white transition-all duration-300 ${t?"shadow-lg shadow-cyan-500/50 animate-pulse":a?"shadow-md shadow-yellow-500/30":"shadow-sm"} ${s?"scale-150 shadow-xl shadow-cyan-500/70":"scale-100"}`,style:{backgroundColor:r}}),s&&e.jsx("div",{className:"absolute inset-0 animate-ping",style:{animationDuration:"1s"},children:e.jsx("div",{className:"w-12 h-12 rounded-full opacity-30",style:{backgroundColor:"#06b6d4",margin:"-12px"}})})]})},vs=({route:s,status:t,isHovered:a})=>{const o=N.find(p=>p.id===s.from),i=N.find(p=>p.id===s.to);if(!o||!i)return null;const l=[[o.coords[0],o.coords[1]],[i.coords[0],i.coords[1]]],r={unlocked:"#06b6d4",partial:"#eab308",locked:"#475569"}[t],m={type:"Feature",geometry:{type:"LineString",coordinates:l},properties:{routeId:s.id,status:t}},h=t==="unlocked"?3:t==="partial"?2.5:2,x=a?h+2:h,f=t==="locked"?.3:a?1:t==="unlocked"?.9:.7;return e.jsxs(ce,{id:`route-${s.id}`,type:"geojson",data:m,children:[t==="unlocked"&&e.jsx(P,{id:`route-glow-${s.id}`,type:"line",paint:{"line-color":r,"line-width":x+6,"line-opacity":a?.3:.15,"line-blur":6},layout:{"line-cap":"round","line-join":"round"}}),e.jsx(P,{id:`route-line-${s.id}`,type:"line",paint:{"line-color":a?"#06b6d4":r,"line-width":x,"line-opacity":f,"line-dasharray":t==="locked"?[2,2]:t==="partial"?[4,2]:[1,0]},layout:{"line-cap":"round","line-join":"round"}}),(t==="unlocked"||t==="partial")&&e.jsx(P,{id:`route-animation-${s.id}`,type:"line",paint:{"line-color":r,"line-width":3,"line-opacity":.8,"line-dasharray":[.1,4]},layout:{"line-cap":"round","line-join":"round"}}),t==="unlocked"&&e.jsx(P,{id:`route-flow-${s.id}`,type:"line",paint:{"line-color":r,"line-width":2,"line-opacity":.7,"line-dasharray":[0,3,2]},layout:{"line-cap":"round","line-join":"round"}})]})},V=({value:s,className:t=""})=>{const[a,o]=c.useState(s),[i,l]=c.useState(!1),[r,m]=c.useState(s);return c.useEffect(()=>{if(String(a)!==String(s)){m(s),l(!0);const h=setTimeout(()=>{o(s),setTimeout(()=>l(!1),300)},300);return()=>clearTimeout(h)}},[s,a]),e.jsx("span",{className:`relative inline-block ${t}`,children:e.jsxs("span",{className:`flip-number ${i?"flipping":""}`,children:[e.jsx("span",{className:"flip-front",children:a}),i&&e.jsx("span",{className:"flip-back",children:r})]})})},js=()=>{var Ce,_e,Me,Ee,Le,Re,Te,ze,Ae;const s=ft(),{combinedScore:t,flightMiles:a,getRouteStatus:o,unlockedRoutes:i,planeLevel:l,profile:r}=pt(),[m,h]=c.useState({longitude:-20,latitude:30,zoom:2.2,pitch:0,bearing:0,padding:{top:0,bottom:0,left:0,right:0}}),[x,f]=c.useState(null),[p,S]=c.useState(null),[C,w]=c.useState(null),[O,W]=c.useState(null),[A,L]=c.useState(Qe[0].url),[_,k]=c.useState(!0),[R,Ke]=c.useState(!0),[ne,Xe]=c.useState(!1),[ue,me]=c.useState(!1),[ae,et]=c.useState(!1),[tt,xe]=c.useState([]),[G,st]=c.useState(!0),[D,I]=c.useState("planner"),[F,he]=c.useState(""),[q,fe]=c.useState(""),[pe,oe]=c.useState(!1),[nt,ge]=c.useState(!1),[y,at]=c.useState(null),[be,ye]=c.useState(null),[Ns,J]=c.useState(null);c.useEffect(()=>(me(!0),gt("/journey-map"),()=>me(!1)),[]);const ve=c.useRef(new Map),Q=c.useCallback((n,d,u,g)=>{const v=`${n.toFixed(4)},${d.toFixed(4)},${u.toFixed(4)},${g.toFixed(4)}`;if(ve.current.has(v))return ve.current.get(v);const b=3959,T=(u-n)*Math.PI/180,Pe=(g-d)*Math.PI/180,Oe=Math.sin(T/2)*Math.sin(T/2)+Math.cos(n*Math.PI/180)*Math.cos(u*Math.PI/180)*Math.sin(Pe/2)*Math.sin(Pe/2),xt=2*Math.atan2(Math.sqrt(Oe),Math.sqrt(1-Oe));return b*xt},[]),je=c.useCallback((n,d)=>N.filter(u=>{if(u.id===n||u.id===d)return!1;const g=z.some(b=>b.from===n&&b.to===u.id||b.to===n&&b.from===u.id),v=z.some(b=>b.from===d&&b.to===u.id||b.to===d&&b.from===u.id);return g&&v}).slice(0,3),[]),Ne=c.useCallback((n,d)=>z.find(u=>u.from===n&&u.to===d||u.from===d&&u.to===n)||null,[]),we=c.useCallback((n,d)=>{const u=(n.coords[1]+d.coords[1])/2,g=(n.coords[0]+d.coords[0])/2,v=Q(n.coords[1],n.coords[0],d.coords[1],d.coords[0]),b=v>5e3?2:v>2e3?3:4;h(T=>({...T,longitude:g,latitude:u,zoom:b}))},[Q]),ot=c.useCallback(()=>{if(!F||!q){J({message:"Please select both origin and destination cities",type:"error"}),setTimeout(()=>J(null),5e3);return}const n=N.find(T=>T.id===F),d=N.find(T=>T.id===q);if(!n||!d){J({message:"Invalid city selection. Please try again.",type:"error"}),setTimeout(()=>J(null),5e3);return}const u=Ne(F,q),g=Q(n.coords[1],n.coords[0],d.coords[1],d.coords[0]),v=je(F,q),b=u?o(u.id):{status:"locked"};at({from:n,to:d,distance:Math.round(g),waypoints:v,status:b.status,directRoute:u,requiredScore:(u==null?void 0:u.requiredScore)||70,requiredMiles:(u==null?void 0:u.requiredMiles)||2e3}),u&&ye(u.id),we(n,d)},[F,q,Q,je,Ne,o,we]),Y=c.useCallback(()=>{let n=Fe;return r!=null&&r.industry&&(n=n.filter(d=>d.industry===r.industry||d.industry==="Cross-Industry")),t&&(n=n.filter(d=>!d.requiredScore||t>=d.requiredScore-10)),y&&(n=n.filter(d=>d.from===y.from.id||d.to===y.to.id||d.from===y.to.id||d.to===y.from.id)),n.slice(0,6)},[r,t,y]),it=c.useCallback(n=>{s(`/scenarios/${n}`)},[s]),lt=c.useCallback(n=>{if(n.title)return n.title;const d=n.problem||"",u=n.desiredOutcome||"";return d.includes("SEO")?"Scale Organic Search":d.includes("pipeline")?"Build Predictable Pipeline":d.includes("ABM")?"Launch ABM Program":d.includes("tech stack")?"Optimize Marketing Tech":d.includes("attribution")?"Fix Marketing Attribution":u.includes("demand")?"Build Demand Generation Engine":`${n.industry} Growth Strategy`},[]),ke=c.useCallback(n=>z.filter(d=>d.from===n||d.to===n).map(d=>d.id),[]),K=c.useCallback(n=>{if(n){const d=ke(n);xe(d),S(n)}else xe([]),S(null)},[ke]),B="pk.eyJ1IjoiZmluZGxpbmc2NyIsImEiOiJjbWl2d3l4eGYyZm52M2Vwd2FnMjBtN2pzIn0.HtCoEjQlnI6YvBQKa9AZnQ";c.useEffect(()=>{bt.log("ðŸ” Mapbox Token Debug:",{tokenExists:!0,tokenLength:(B==null?void 0:B.length)||0,tokenPreview:`${B.substring(0,10)}...`,allEnvVars:Object.keys(bs).filter(n=>n.startsWith("VITE_"))})},[]);const E=c.useMemo(()=>{const n={};return N.forEach(d=>{const u=z.filter(b=>b.from===d.id||b.to===d.id);let g=!1,v=!1;u.forEach(b=>{const T=o(b.id);T.status==="unlocked"&&(g=!0),T.status==="partial"&&(v=!0)}),n[d.id]={unlocked:g,partial:v&&!g}}),n},[o]),rt=c.useMemo(()=>{const n=yt();return{...n,features:n.features.map(d=>{var u,g;return{...d,properties:{...d.properties,status:(u=E[d.properties.id])!=null&&u.unlocked?"unlocked":(g=E[d.properties.id])!=null&&g.partial?"partial":"locked"}}})}},[E]),Se=c.useMemo(()=>z.map(n=>({route:n,status:o(n.id)})),[o]),ct=c.useMemo(()=>ne?N.filter(n=>{var d;return(d=E[n.id])==null?void 0:d.unlocked}):N,[ne,E]),ie=c.useCallback(n=>{h(d=>({...d,longitude:n.coords[0],latitude:n.coords[1],zoom:5}))},[]),dt=c.useMemo(()=>({type:"FeatureCollection",features:Object.entries({NA:{bbox:[-130,25,-60,50]},EU:{bbox:[-10,35,40,70]},APAC:{bbox:[100,-10,150,50]},MENA:{bbox:[30,10,60,40]}}).map(([d,{bbox:u}])=>({type:"Feature",geometry:{type:"Polygon",coordinates:[[[u[0],u[1]],[u[2],u[1]],[u[2],u[3]],[u[0],u[3]],[u[0],u[1]]]]},properties:{region:d}}))}),[]),ut=c.useMemo(()=>{const n=new Set;return i.forEach(d=>{const u=z.find(g=>g.id===d);u&&(n.add(u.from),n.add(u.to))}),n.size},[i]),mt=z.length,j=C?Se.find(n=>n.route.id===C):null;return e.jsxs("div",{className:"min-h-screen bg-slate-950 relative",children:[e.jsx("div",{className:"bg-slate-900/95 backdrop-blur-sm border-b border-slate-800 sticky top-0 z-40",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-cyan-500/10 rounded-lg",children:e.jsx($e,{className:"text-cyan-400 h-6 w-6 transform -rotate-45"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Journey Map"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Interactive marketing journey visualization"})]})]}),e.jsx("button",{onClick:()=>s("/"),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(X,{size:20})})]})})}),e.jsx("div",{className:"sticky top-[73px] left-0 right-0 z-30 bg-black/90 backdrop-blur-sm border-b border-cyan-500 shadow-lg",children:e.jsx("div",{className:"container mx-auto px-3 sm:px-6 py-2 sm:py-3",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-2 sm:gap-4 md:gap-6 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Altitude"}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl font-mono font-bold text-cyan-400",children:[e.jsx(V,{value:t}),e.jsx("span",{className:"text-sm sm:text-base md:text-lg text-slate-500",children:"/100"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Aircraft"}),e.jsx("div",{className:"text-base sm:text-lg md:text-xl font-mono font-bold text-yellow-400",children:e.jsx(V,{value:l})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Flight Miles"}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-mono font-bold text-purple-400",children:e.jsx(V,{value:a.toLocaleString()})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Routes"}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl font-mono font-bold text-green-400",children:[e.jsx(V,{value:i.length}),e.jsxs("span",{className:"text-sm sm:text-base md:text-lg text-slate-500",children:["/",mt]})]})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Cities"}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl font-mono font-bold text-cyan-400",children:[e.jsx(V,{value:ut}),e.jsx("span",{className:"text-sm sm:text-base md:text-lg text-slate-500",children:"/13"})]})]})]})})}),e.jsxs("div",{className:"relative w-full transition-all duration-300",style:{height:G?"calc(100vh - 146px - 40vh)":"calc(100vh - 146px)",minHeight:"300px"},children:[e.jsxs(hs,{...m,onMove:n=>h(n.viewState),mapboxAccessToken:B,mapStyle:A,projection:{name:"mercator"},style:{width:"100%",height:"100%"},attributionControl:!1,dragPan:!1,dragRotate:!1,touchZoomRotate:!1,interactiveLayerIds:["city-names-minimal","city-names-full","city-functions","airport-codes"],onMouseEnter:n=>{if(n.features&&n.features[0]&&n.features[0].properties){const d=n.features[0].properties.id;d&&(W(d),K(d))}},onMouseLeave:()=>{W(null),K(null)},onClick:n=>{if(n.features&&n.features[0]&&n.features[0].properties){const d=n.features[0].properties.id;if(d){const u=N.find(g=>g.id===d);u&&(f(u),ie(u))}}},children:[e.jsx(gs,{position:"top-right"}),e.jsx(ps,{position:"top-right"}),m.zoom>=2&&m.zoom<=4&&e.jsx(ce,{id:"regions",type:"geojson",data:dt,children:e.jsx(P,{id:"region-fills",type:"fill",paint:{"fill-color":["match",["get","region"],"NA","rgba(59, 130, 246, 0.08)","EU","rgba(168, 85, 247, 0.08)","APAC","rgba(34, 197, 94, 0.08)","MENA","rgba(251, 146, 60, 0.08)","rgba(0,0,0,0)"],"fill-opacity":.2}})}),R&&Se.map(({route:n,status:d})=>{const u=tt.includes(n.id)||be===n.id;return e.jsx(vs,{route:n,status:d.status,isHovered:u},n.id)}),e.jsxs(ce,{id:"cities-labels",type:"geojson",data:rt,children:[e.jsx(P,{id:"airport-codes",type:"symbol",minzoom:4,layout:{"text-field":["get","code"],"text-font":["Open Sans Medium","Arial Unicode MS Regular"],"text-size":10,"text-offset":[0,-3.5],"text-anchor":"bottom","text-letter-spacing":.1,"text-allow-overlap":!1},paint:{"text-color":"#64748b","text-halo-color":"#020617","text-halo-width":1,"text-halo-blur":.5}}),e.jsx(P,{id:"city-names-minimal",type:"symbol",maxzoom:3,layout:{"text-field":["get","name"],"text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":12,"text-offset":[0,-2],"text-anchor":"top","text-allow-overlap":!1},paint:{"text-color":["case",["==",["get","id"],O||""],"#22d3ee",["==",["get","status"],"unlocked"],"#06b6d4",["==",["get","status"],"partial"],"#eab308","#64748b"],"text-halo-color":"#020617","text-halo-width":2,"text-halo-blur":1}}),e.jsx(P,{id:"city-names-full",type:"symbol",minzoom:3,layout:{"text-field":["get","name"],"text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":["interpolate",["linear"],["zoom"],3,12,5,14,7,16],"text-offset":[0,-2],"text-anchor":"top","text-allow-overlap":!1},paint:{"text-color":["case",["==",["get","id"],O||""],"#22d3ee",["==",["get","status"],"unlocked"],"#06b6d4",["==",["get","status"],"partial"],"#eab308","#64748b"],"text-halo-color":"#020617","text-halo-width":["case",["==",["get","id"],O||""],3,2],"text-halo-blur":1}}),e.jsx(P,{id:"city-functions",type:"symbol",minzoom:4,layout:{"text-field":["get","function"],"text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],4,10,6,11,8,12],"text-offset":[0,.5],"text-anchor":"top","text-allow-overlap":!1},paint:{"text-color":["case",["==",["get","id"],O||""],"#94a3b8","#94a3b8"],"text-halo-color":"#020617","text-halo-width":1.5,"text-halo-blur":.5}})]}),ct.map(n=>{const d=E[n.id]||{unlocked:!1,partial:!1},u=p===n.id;return e.jsx(fs,{longitude:n.coords[0],latitude:n.coords[1],anchor:"center",children:e.jsx(ys,{city:n,isHovered:u,isUnlocked:d.unlocked,isPartial:d.partial,onClick:()=>{f(n),ie(n)},onMouseEnter:()=>K(n.id),onMouseLeave:()=>K(null)})},n.id)})]}),e.jsxs("div",{className:"absolute top-4 left-4 z-10",children:[e.jsx("button",{onClick:()=>et(!ae),className:"bg-slate-900/95 backdrop-blur-sm hover:bg-slate-800 border border-slate-800 rounded-lg p-3 text-cyan-400 transition-colors shadow-xl min-w-[44px] min-h-[44px] flex items-center justify-center",title:ae?"Hide Controls":"Show Controls",children:e.jsx(Rt,{className:"w-6 h-6"})}),ae&&e.jsxs("div",{className:"mt-2 bg-slate-900/95 backdrop-blur-sm border border-slate-800 rounded-xl p-4 shadow-xl max-w-xs",children:[e.jsxs("h3",{className:"text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(vt,{className:"text-cyan-400",size:18}),"Map Controls"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase mb-2 block",children:"Map Style"}),e.jsx("select",{value:A,onChange:n=>L(n.target.value),className:"w-full p-2 bg-slate-800 border border-slate-700 rounded-lg text-white text-sm focus:ring-2 focus:ring-cyan-500 outline-none",children:Qe.map(n=>e.jsx("option",{value:n.url,children:n.name},n.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase mb-2",children:"Legend"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-500"}),e.jsx("span",{className:"text-white",children:"Unlocked Routes"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),e.jsx("span",{className:"text-white",children:"Partially Available"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-500"}),e.jsx("span",{className:"text-white",children:"Locked Routes"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-800",children:[e.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase mb-2",children:"Filters"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_,onChange:n=>k(n.target.checked),className:"w-4 h-4 rounded border-slate-700 bg-slate-800 text-cyan-500 focus:ring-cyan-500"}),e.jsx("span",{className:"text-sm text-white",children:"Show all cities"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:n=>Ke(n.target.checked),className:"w-4 h-4 rounded border-slate-700 bg-slate-800 text-cyan-500 focus:ring-cyan-500"}),e.jsx("span",{className:"text-sm text-white",children:"Show route lines"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ne,onChange:n=>Xe(n.target.checked),className:"w-4 h-4 rounded border-slate-700 bg-slate-800 text-cyan-500 focus:ring-cyan-500"}),e.jsx("span",{className:"text-sm text-white",children:"Show only unlocked"})]})]})]}),e.jsx("div",{className:"pt-4 mt-4 border-t border-slate-800",children:e.jsxs("div",{className:"text-xs text-slate-400 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Score:"}),e.jsxs("span",{className:"text-cyan-400 font-bold",children:[t,"/100"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Unlocked Routes:"}),e.jsx("span",{className:"text-emerald-400 font-bold",children:i.length})]})]})})]})]}),p&&(()=>{const n=N.find(b=>b.id===p);if(!n)return null;const d=z.filter(b=>b.from===n.id||b.to===n.id),u=Math.min(...d.map(b=>b.requiredScore)),g=Math.min(...d.map(b=>b.requiredMiles)),v=E[n.id]||{unlocked:!1,partial:!1};return e.jsxs("div",{className:"absolute top-20 left-4 bg-slate-900/95 backdrop-blur-sm border border-cyan-500/50 rounded-xl p-4 shadow-2xl z-50 max-w-sm animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${v.unlocked?"bg-emerald-500/20":v.partial?"bg-yellow-500/20":"bg-slate-800"}`,children:e.jsx(jt,{className:`w-5 h-5 ${v.unlocked?"text-emerald-400":v.partial?"text-yellow-400":"text-slate-400"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-cyan-400 mb-1",children:n.name}),e.jsx("p",{className:"text-sm text-slate-300 mb-2",children:n.function}),e.jsx("div",{className:`inline-flex items-center gap-2 px-2 py-1 rounded text-xs font-semibold ${v.unlocked?"bg-emerald-500/20 text-emerald-400":v.partial?"bg-yellow-500/20 text-yellow-400":"bg-slate-800 text-slate-400"}`,children:v.unlocked?"âœ“ Unlocked":v.partial?"âš  Partial":"ðŸ”’ Locked"})]})]}),e.jsxs("div",{className:"space-y-2 pt-3 border-t border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Min Score Required:"}),e.jsxs("span",{className:"text-cyan-400 font-bold",children:[u,"+"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Min Flight Miles:"}),e.jsx("span",{className:"text-yellow-400 font-bold",children:g.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Connected Routes:"}),e.jsx("span",{className:"text-purple-400 font-bold",children:d.length})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Region:"}),e.jsx("span",{className:"text-slate-300 font-semibold",children:n.region})]})]})]})})(),e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10 z-0",children:Array.from({length:20}).map((n,d)=>e.jsx("div",{className:"absolute w-1 h-1 bg-cyan-400 rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*2}s`}},d))}),e.jsx("button",{onClick:()=>{h({longitude:-20,latitude:30,zoom:2.2,pitch:0,bearing:0,padding:{top:0,bottom:0,left:0,right:0}})},className:"absolute bottom-4 left-4 bg-slate-900/95 backdrop-blur-sm hover:bg-slate-800 border border-slate-700 rounded-lg p-3 text-cyan-400 transition-colors shadow-xl z-10 min-w-[44px] min-h-[44px] flex items-center justify-center",title:"Reset View",children:e.jsx(Nt,{size:20})})]}),x&&ue&&te.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-300",onClick:n=>{n.target===n.currentTarget&&f(null)},onKeyDown:n=>{n.key==="Escape"&&f(null)},role:"dialog","aria-modal":"true","aria-labelledby":"city-modal-title",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{id:"city-modal-title",className:"text-2xl font-bold text-white mb-2",children:x.name}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-400",children:[e.jsx("span",{className:"text-cyan-400 font-semibold",children:x.function}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:x.region})]})]}),e.jsx("button",{onClick:()=>f(null),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(X,{size:20})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-slate-300",children:x.description})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-sm ${(Ce=E[x.id])!=null&&Ce.unlocked?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":(_e=E[x.id])!=null&&_e.partial?"bg-yellow-500/10 text-yellow-400 border border-yellow-500/20":"bg-slate-800 text-slate-400 border border-slate-700"}`,children:[(Me=E[x.id])!=null&&Me.unlocked?e.jsx(le,{size:16}):e.jsx(Ie,{size:16}),(Ee=E[x.id])!=null&&Ee.unlocked?"Unlocked":(Le=E[x.id])!=null&&Le.partial?"Partially Available":"Locked"]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-400 uppercase mb-3",children:"Connected Routes"}),e.jsx("div",{className:"space-y-2",children:z.filter(n=>n.from===x.id||n.to===x.id).map(n=>{const d=o(n.id),u=N.find(g=>g.id===(n.from===x.id?n.to:n.from));return e.jsxs("div",{onClick:()=>{f(null),w(n.id)},className:"p-3 bg-slate-800 rounded-lg border border-slate-700 hover:border-cyan-500/50 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white",children:n.name}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${d.status==="unlocked"?"bg-emerald-500/20 text-emerald-400":d.status==="partial"?"bg-yellow-500/20 text-yellow-400":"bg-slate-700 text-slate-400"}`,children:d.status})]}),u&&e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["â†’ ",u.name]})]},n.id)})})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:()=>{ie(x),f(null)},className:"flex-1 py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-semibold rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(De,{size:18}),"Focus on City"]})})]})}),document.body),j&&ue&&te.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n=>{n.target===n.currentTarget&&w(null)},children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto animate-in fade-in slide-in-from-bottom duration-300 delay-100",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{id:"route-modal-title",className:"text-2xl font-bold text-white mb-2",children:j.route.name}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-400",children:[e.jsxs("span",{children:[(Re=N.find(n=>n.id===j.route.from))==null?void 0:Re.name," â†’ ",(Te=N.find(n=>n.id===j.route.to))==null?void 0:Te.name]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:j.route.difficulty}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:j.route.estimatedDuration})]})]}),e.jsx("button",{onClick:()=>w(null),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-slate-900 min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Close route details modal",children:e.jsx(X,{size:20,"aria-hidden":"true"})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-slate-300 text-sm",children:["Journey from ",(ze=N.find(n=>n.id===j.route.from))==null?void 0:ze.name," to ",(Ae=N.find(n=>n.id===j.route.to))==null?void 0:Ae.name]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-sm ${j.status.status==="unlocked"?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":j.status.status==="partial"?"bg-yellow-500/10 text-yellow-400 border border-yellow-500/20":"bg-slate-800 text-slate-400 border border-slate-700"}`,children:[j.status.status==="unlocked"&&e.jsx(le,{size:16}),j.status.status==="unlocked"?"Unlocked":j.status.status==="partial"?"Partially Available":"Locked"]})}),e.jsxs("div",{className:"mb-6 bg-slate-800/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-400 uppercase mb-3",children:"Requirements"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-300",children:"Score Required:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:j.route.requiredScore})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-300",children:"Miles Required:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:j.route.requiredMiles.toLocaleString()})]}),j.status.status!=="unlocked"&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-2",children:"Your Current Status:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-300",children:"Your Score:"}),e.jsxs("span",{className:t>=j.route.requiredScore?"text-emerald-400":"text-red-400",children:[t," / ",j.route.requiredScore]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-300",children:"Your Miles:"}),e.jsxs("span",{className:a>=j.route.requiredMiles?"text-emerald-400":"text-red-400",children:[a.toLocaleString()," / ",j.route.requiredMiles.toLocaleString()]})]})]})]})]})]}),j.route.waypoints&&j.route.waypoints.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-400 uppercase mb-3",children:"Journey Waypoints"}),e.jsx("div",{className:"space-y-3",children:j.route.waypoints.map((n,d)=>e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx(Ie,{className:"text-cyan-400 mt-0.5",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"font-semibold text-white text-sm",children:n.title}),e.jsx("span",{className:"text-xs text-slate-500 bg-slate-700 px-2 py-1 rounded",children:n.duration})]}),e.jsx("p",{className:"text-xs text-slate-400 mb-3",children:n.description}),n.deliverables.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Deliverables:"}),n.deliverables.map((u,g)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-300",children:[e.jsx(le,{size:14,className:"text-cyan-400 flex-shrink-0"}),e.jsx("span",{children:u})]},g))]})]})]})},d))})]}),j.status.status==="unlocked"&&e.jsx("div",{className:"pt-4 border-t border-slate-800",children:e.jsxs("button",{onClick:()=>{w(null),s("/scenarios")},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-semibold rounded-lg transition-all hover:shadow-lg hover:shadow-cyan-500/20 flex items-center justify-center gap-2",children:[e.jsx(wt,{size:18}),"Start Journey",e.jsx(ee,{size:18})]})})]})}),document.body),e.jsxs("div",{className:`
        fixed bottom-0 left-0 right-0 z-20
        bg-slate-900/95 backdrop-blur-lg
        border-t-2 border-cyan-500
        transition-transform duration-300 ease-in-out
        ${G?"translate-y-0":"translate-y-full"}
        shadow-2xl
      `,children:[e.jsx("button",{onClick:()=>st(!G),className:"absolute -top-10 right-4 bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-t-lg flex items-center gap-2 transition-colors shadow-lg min-h-[44px]",children:G?e.jsxs(e.Fragment,{children:[e.jsx(kt,{className:"w-5 h-5"}),"Hide Control Panel"]}):e.jsxs(e.Fragment,{children:[e.jsx(St,{className:"w-5 h-5"}),"Show Control Panel"]})}),e.jsxs("div",{className:"container mx-auto p-4 sm:p-6",style:{height:"40vh",maxHeight:"500px",overflowY:"auto"},children:[e.jsxs("div",{className:"flex gap-4 mb-4 border-b border-slate-700",children:[e.jsx("button",{onClick:()=>I("planner"),className:`pb-2 px-4 transition-colors ${D==="planner"?"text-cyan-400 border-b-2 border-cyan-400":"text-slate-400 hover:text-white"}`,children:"Flight Planner"}),e.jsx("button",{onClick:()=>I("scenarios"),className:`pb-2 px-4 transition-colors ${D==="scenarios"?"text-cyan-400 border-b-2 border-cyan-400":"text-slate-400 hover:text-white"}`,children:"Recommended Scenarios"}),e.jsx("button",{onClick:()=>I("routes"),className:`pb-2 px-4 transition-colors ${D==="routes"?"text-cyan-400 border-b-2 border-cyan-400":"text-slate-400 hover:text-white"}`,children:"Active Routes"})]}),e.jsxs("div",{children:[D==="planner"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-cyan-400 text-sm font-semibold mb-2 block",children:"Departure"}),e.jsxs("select",{value:F,onChange:n=>he(n.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white p-3 rounded-lg focus:ring-2 focus:ring-cyan-500 outline-none min-h-[44px]",children:[e.jsx("option",{value:"",children:"Select Origin City..."}),N.map(n=>e.jsxs("option",{value:n.id,children:[n.name," - ",n.function]},n.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-cyan-400 text-sm font-semibold mb-2 block",children:"Destination"}),e.jsxs("select",{value:q,onChange:n=>fe(n.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white p-3 rounded-lg focus:ring-2 focus:ring-cyan-500 outline-none min-h-[44px]",children:[e.jsx("option",{value:"",children:"Select Destination City..."}),N.filter(n=>n.id!==F).map(n=>e.jsxs("option",{value:n.id,children:[n.name," - ",n.function]},n.id))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:ot,className:"w-full bg-cyan-500 hover:bg-cyan-600 text-white px-6 py-3 rounded-lg flex items-center justify-center gap-2 transition-colors font-semibold min-h-[44px]",children:[e.jsx($e,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Calculate Route"}),e.jsx("span",{className:"sm:hidden",children:"Calculate"})]})})]}),y&&e.jsxs("div",{className:"mt-6 bg-slate-800 p-6 rounded-lg border border-slate-700",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-slate-400 text-xs mb-1",children:"Distance"}),e.jsxs("div",{className:"text-cyan-400 font-bold text-lg",children:[y.distance.toLocaleString()," mi"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-slate-400 text-xs mb-1",children:"Waypoints"}),e.jsxs("div",{className:"text-yellow-400 font-bold text-lg",children:[y.waypoints.length," cities"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-slate-400 text-xs mb-1",children:"Score Needed"}),e.jsxs("div",{className:`font-bold text-lg ${t>=y.requiredScore?"text-green-400":"text-red-400"}`,children:[y.requiredScore,"+"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-slate-400 text-xs mb-1",children:"Status"}),e.jsx("div",{className:`font-bold text-lg ${y.status==="unlocked"?"text-green-400":y.status==="partial"?"text-yellow-400":"text-slate-500"}`,children:y.status==="unlocked"?"âœ“ Ready":y.status==="partial"?"âš  75% Ready":"ðŸ”’ Locked"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-2",children:"Route Path:"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-cyan-400 font-semibold",children:y.from.name}),e.jsx(ee,{className:"w-4 h-4 text-slate-500"}),y.waypoints.map(n=>e.jsxs(Ye.Fragment,{children:[e.jsx("span",{className:"text-yellow-400",children:n.name}),e.jsx(ee,{className:"w-4 h-4 text-slate-500"})]},n.id)),e.jsx("span",{className:"text-cyan-400 font-semibold",children:y.to.name})]})]}),y.status==="locked"&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Tt,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-red-400 font-semibold mb-1",children:"This route is currently locked"}),e.jsxs("div",{className:"text-slate-400",children:["You need a score of ",y.requiredScore,"+ and",y.requiredMiles.toLocaleString()," flight miles to unlock this journey. Complete the assessment and recommended scenarios to qualify."]})]})]})}),y.status==="unlocked"&&e.jsx("div",{className:"bg-green-500/10 border border-green-500/30 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-green-400 font-semibold",children:"You're ready for this journey!"})]})}),e.jsx("button",{onClick:()=>I("scenarios"),className:"mt-4 w-full bg-cyan-500 hover:bg-cyan-400 text-white py-3 rounded-lg font-semibold transition-colors",children:"View Recommended Scenarios for This Route"})]})]}),D==="scenarios"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-white font-bold",children:y?`Scenarios for ${y.from.name} â†’ ${y.to.name}`:"Recommended Scenarios"}),e.jsxs("span",{className:"text-slate-400 text-sm",children:[Y().length," scenarios"]})]}),Y().length===0&&e.jsxs("div",{className:"bg-slate-800 p-8 rounded-lg text-center",children:[e.jsx(zt,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400 mb-4",children:y?"No specific scenarios for this route yet.":"Calculate a route to see relevant scenarios."}),!y&&e.jsx("button",{onClick:()=>I("planner"),className:"text-cyan-400 hover:text-cyan-300 transition-colors",children:"Go to Flight Planner â†’"})]}),Y().map(n=>{var d;return e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg hover:bg-slate-700 cursor-pointer transition-all border border-slate-700 hover:border-cyan-500",onClick:()=>it(n.id),children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-cyan-400 font-semibold mb-1",children:lt(n)}),e.jsx("p",{className:"text-slate-400 text-sm line-clamp-2",children:n.problem||n.challenge||n.description})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("span",{className:"text-xs bg-purple-500/20 text-purple-400 px-2 py-1 rounded",children:n.industry}),n.companySize&&e.jsx("span",{className:"text-xs bg-slate-700 text-slate-400 px-2 py-1 rounded",children:n.companySize})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_t,{className:"w-3 h-3"}),n.estimatedDuration||n.duration||"90-120 days"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"}),n.difficulty||`Complexity: ${n.complexity}/5`]}),n.from&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Mt,{className:"w-3 h-3"}),((d=N.find(u=>u.id===n.from))==null?void 0:d.name)||"Multiple cities"]})]})]},n.id)}),Y().length>0&&e.jsxs("button",{onClick:()=>s("/scenarios"),className:"w-full text-cyan-400 hover:text-cyan-300 py-3 text-sm font-semibold transition-colors",children:["View All ",Fe.length," Scenarios â†’"]})]}),D==="routes"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-lg mb-4",children:"All Routes"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:z.map(n=>{const d=o(n.id),u=N.find(v=>v.id===n.from),g=N.find(v=>v.id===n.to);return e.jsxs("div",{onClick:()=>{ye(n.id),he(n.from),fe(n.to),I("planner")},className:`
                          p-3 rounded-lg border-2 cursor-pointer transition-all
                          ${d.status==="unlocked"?"border-cyan-500 bg-cyan-500/10 hover:bg-cyan-500/20":""}
                          ${d.status==="partial"?"border-yellow-500 bg-yellow-500/10 hover:bg-yellow-500/20":""}
                          ${d.status==="locked"?"border-slate-700 bg-slate-800/50 hover:bg-slate-800":""}
                          ${be===n.id?"ring-2 ring-cyan-400 ring-offset-2 ring-offset-slate-900":""}
                        `,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-white font-semibold",children:u==null?void 0:u.name}),e.jsx(ee,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"text-sm text-white font-semibold",children:g==null?void 0:g.name})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d.status==="unlocked"&&e.jsx("span",{className:"text-xs text-cyan-400 font-semibold",children:"âœ“ Available"}),d.status==="partial"&&e.jsxs("span",{className:"text-xs text-yellow-400 font-semibold",children:["âš  ",d.currentProgress,"% Ready"]}),d.status==="locked"&&e.jsx("span",{className:"text-xs text-slate-500",children:"ðŸ”’ Locked"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:[n.requiredScore,"+ / ",n.requiredMiles.toLocaleString()," mi"]})]})]},n.id)})})]})]})]})]}),e.jsx("button",{onClick:()=>oe(!pe),className:"fixed bottom-24 right-8 z-30 bg-cyan-500 hover:bg-cyan-400 text-white p-4 rounded-full shadow-2xl transition-all hover:scale-110 active:scale-95","aria-label":"Show quick help",children:e.jsx(Et,{className:"w-6 h-6"})}),pe&&e.jsxs("div",{className:"fixed bottom-40 right-8 bg-slate-900 rounded-lg shadow-2xl border border-cyan-500 p-6 w-80 sm:w-96 z-30 animate-in fade-in slide-in-from-bottom",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h4",{className:"font-bold text-white",children:"Quick Guide"}),e.jsx("button",{onClick:()=>oe(!1),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(X,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-cyan-400 font-semibold mb-2",children:"City Colors:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-400"})," Unlocked"]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400"})," Partial"]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-500"})," Locked"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-purple-400 font-semibold mb-2",children:"Interactions:"}),e.jsxs("div",{className:"text-slate-300 space-y-1",children:[e.jsx("div",{children:"â€¢ Hover over cities for details"}),e.jsx("div",{children:"â€¢ Click cities for full information"}),e.jsx("div",{children:"â€¢ Two lit cities = unlocked route"})]})]}),e.jsx("button",{onClick:()=>{oe(!1),ge(!0)},className:"w-full text-cyan-400 hover:text-cyan-300 text-center py-2 font-semibold transition-colors",children:"View Full Guide â†’"})]})]}),e.jsx(Lt,{isOpen:nt,onClose:()=>ge(!1),initialTab:"Journey Map"})]})},Ss=Ye.memo(js);export{Ss as JourneyMap};
